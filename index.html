<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Open vs. Closed Model Arena: A Comprehensive Interactive Analysis</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Calm Harmony Neutrals -->
    <!-- Application Structure Plan: The SPA is a multi-tabbed dashboard, now restructured to facilitate a direct comparison between open-source and closed-source models. A new primary filter for 'Source Type' is added to all relevant views. A new data point for 'Minimum VRAM' and a new 'Modification' tab have been added. The tabs (Model Explorer, Performance, Efficiency & Cost, Modification, Risks, Advisor) remain, but the content within is updated to reflect the expanded dataset. This structure allows leaders to analyze the distinct advantages and trade-offs of each ecosystem based on their specific strategic priorities (e.g., performance vs. control vs. memory vs. customizability). -->
    <!-- Visualization & Content Choices: Report Info -> Goal -> Viz/Presentation Method -> Interaction -> Justification. 1. Modification Difficulty -> Goal: Rate ease of fine-tuning -> Method: New HTML table with color-coded ratings -> Interaction: Static view -> Justification: Provides a clear, scannable guide for developers on post-release customizability. 2. Model Memory -> Goal: Show hardware requirements -> Method: 'Min. VRAM' column in the interactive table -> Interaction: Sorting -> Justification: Provides a critical, practical metric for deployment planning. 3. Performance Gap -> Goal: Visualize the SOTA frontier -> Method: Updated Chart.js Bar/Bubble charts -> Interaction: Hover/filter -> Justification: Clearly shows the performance and efficiency differences between the two ecosystems. All visualizations use Chart.js (Canvas) or structured HTML/CSS, confirming NO SVG/Mermaid. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #F5F5F4; color: #374151; }
        .tab-active { border-color: #14B8A6; color: #0F766E; background-color: #FFFFFF; }
        .tab-inactive { border-color: transparent; color: #57534E; }
        .chart-container { position: relative; width: 100%; max-width: 900px; margin-left: auto; margin-right: auto; height: 500px; max-height: 65vh; }
        .fade-in { animation: fadeIn 0.5s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .card { background-color: white; border-radius: 0.75rem; box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1); transition: all 0.3s ease; }
        .card:hover { transform: translateY(-5px); box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1); }
        .filter-btn-active { background-color: #0D9488; color: white; }
        .filter-btn-inactive { background-color: #E7E5E4; color: #57534E; }
    </style>
</head>
<body class="bg-stone-100">

    <div class="container mx-auto p-4 sm:p-6 md:p-8">
        <header class="text-center mb-8">
            <h1 class="text-4xl font-bold text-stone-900">The Open vs. Closed Model Arena</h1>
            <p class="mt-2 text-lg text-stone-600">A Comprehensive Interactive Analysis of the AI Ecosystem</p>
        </header>

        <nav class="mb-8 bg-stone-200 rounded-lg p-1 flex flex-wrap justify-center items-center gap-2">
            <button onclick="showView('explorer')" class="tab-button text-sm md:text-base px-4 py-2 font-semibold rounded-md border-b-2 transition-all duration-300 tab-active">
                <span class="mr-2">üß≠</span>Model Explorer
            </button>
            <button onclick="showView('performance')" class="tab-button text-sm md:text-base px-4 py-2 font-semibold rounded-md border-b-2 transition-all duration-300 tab-inactive">
                <span class="mr-2">üìä</span>Benchmark Deep Dive
            </button>
            <button onclick="showView('efficiency')" class="tab-button text-sm md:text-base px-4 py-2 font-semibold rounded-md border-b-2 transition-all duration-300 tab-inactive">
                <span class="mr-2">‚ö°</span>Efficiency & Cost
            </button>
            <button onclick="showView('modification')" class="tab-button text-sm md:text-base px-4 py-2 font-semibold rounded-md border-b-2 transition-all duration-300 tab-inactive">
                <span class="mr-2">üîß</span>Modification
            </button>
             <button onclick="showView('risks')" class="tab-button text-sm md:text-base px-4 py-2 font-semibold rounded-md border-b-2 transition-all duration-300 tab-inactive">
                <span class="mr-2">‚ö†Ô∏è</span>Risks & Flaws
            </button>
            <button onclick="showView('advisor')" class="tab-button text-sm md:text-base px-4 py-2 font-semibold rounded-md border-b-2 transition-all duration-300 tab-inactive">
                <span class="mr-2">üí°</span>Strategic Advisor
            </button>
        </nav>

        <main id="main-content"></main>
    </div>

    <script>
        const modelData = {
            models: [
                // Open Source Models
                { family: 'DeepSeek', name: 'DeepSeek-R1', arch: 'MoE', params: 671, source_type: 'Open Source', context: 128, license: 'MIT', mmlu: 90.8, math: 97.3, swe_bench: 49.2, risk: 'Medium', input_tokens: 30, output_tokens: 210, energy_wh: 4.5, min_vram_gb: 96, modification_difficulty: 'Hard' },
                { family: 'DeepSeek', name: 'DeepSeek-V3', arch: 'MoE', params: 671, source_type: 'Open Source', context: 128, license: 'MIT', mmlu: 87.1, math: 90.2, swe_bench: 42.0, risk: 'High', input_tokens: 30, output_tokens: 195, energy_wh: 4.2, min_vram_gb: 96, modification_difficulty: 'Hard' },
                { family: 'Qwen', name: 'Qwen3-Coder', arch: 'MoE', params: 480, source_type: 'Open Source', context: 256, license: 'Apache 2.0', mmlu: 75.0, math: 70.0, swe_bench: 65.0, risk: 'Low', input_tokens: 25, output_tokens: 150, energy_wh: 3.8, min_vram_gb: 80, modification_difficulty: 'Medium' },
                { family: 'Meta', name: 'Llama 3.1 405B', arch: 'Dense', params: 405, source_type: 'Open Source', context: 128, license: 'Llama 3.1 Community', mmlu: 84.4, math: 88.2, swe_bench: 35.1, risk: 'Low', input_tokens: 31, output_tokens: 175, energy_wh: 8.0, min_vram_gb: 240, modification_difficulty: 'Easy' },
                { family: 'Meta', name: 'Llama 3.1 8B', arch: 'Dense', params: 8, source_type: 'Open Source', context: 128, license: 'Llama 3.1 Community', mmlu: 68.4, math: 55.0, swe_bench: 12.5, risk: 'Low', input_tokens: 31, output_tokens: 165, energy_wh: 0.15, min_vram_gb: 6, modification_difficulty: 'Easy' },
                { family: 'Mistral', name: 'Mixtral 8x22B', arch: 'MoE', params: 141, source_type: 'Open Source', context: 64, license: 'Apache 2.0', mmlu: 77.8, math: 80.2, swe_bench: 30.2, risk: 'Low', input_tokens: 28, output_tokens: 155, energy_wh: 1.8, min_vram_gb: 48, modification_difficulty: 'Easy' },
                { family: 'Microsoft', name: 'Phi-3-medium', arch: 'Dense', params: 14, source_type: 'Open Source', context: 128, license: 'MIT', mmlu: 76.9, math: 72.1, swe_bench: 25.8, risk: 'Low', input_tokens: 33, output_tokens: 150, energy_wh: 0.25, min_vram_gb: 10, modification_difficulty: 'Easy' },
                { family: 'Stability AI', name: 'Stable Diffusion 3', arch: 'Latent Diffusion', params: 8, source_type: 'Open Source', context: null, license: 'Creator License', mmlu: null, math: null, swe_bench: null, risk: 'Medium', input_tokens: 20, output_tokens: null, energy_wh: 0.5, min_vram_gb: 16, modification_difficulty: 'Easy' },
                { family: 'Meta', name: 'Llama 4 Maverick', arch: 'MoE', params: 400, source_type: 'Open Source', context: 1000, license: 'Llama 4 Community', mmlu: 85.5, math: 61.2, swe_bench: 16.0, risk: 'Medium', input_tokens: 31, output_tokens: 180, energy_wh: 3.5, min_vram_gb: 64, modification_difficulty: 'Medium' },
                { family: 'Google', name: 'Gemma 2 27B', arch: 'Dense', params: 27, source_type: 'Open Source', context: 128, license: 'Gemma Terms of Use', mmlu: 75.2, math: 70.1, swe_bench: 22.1, risk: 'Medium', input_tokens: 34, output_tokens: 170, energy_wh: 0.6, min_vram_gb: 20, modification_difficulty: 'Medium' },
                { family: 'Kiwi', name: 'Kiwi K2', arch: 'Dense', params: 80, source_type: 'Open Source', context: 512, license: 'Apache 2.0', mmlu: 88.1, math: 85.4, swe_bench: 45.3, risk: 'Low', input_tokens: 29, output_tokens: 160, energy_wh: 1.5, min_vram_gb: 40, modification_difficulty: 'Medium' },
                { family: 'OpenAI', name: 'gpt-oss-120b', arch: 'MoE', params: 117, source_type: 'Open Source', context: 128, license: 'Apache 2.0', mmlu: 79.3, math: 72.4, swe_bench: 32.1, risk: 'High', input_tokens: 32, output_tokens: 250, energy_wh: 1.5, min_vram_gb: 60, modification_difficulty: 'Medium' },
                { family: 'OpenAI', name: 'gpt-oss-20b', arch: 'MoE', params: 21, source_type: 'Open Source', context: 128, license: 'Apache 2.0', mmlu: 72.1, math: 68.0, swe_bench: 28.4, risk: 'High', input_tokens: 32, output_tokens: 240, energy_wh: 0.4, min_vram_gb: 16, modification_difficulty: 'Medium' },
                { family: '01.AI', name: 'Yi-1.5-34B', arch: 'Dense', params: 34, source_type: 'Open Source', context: 4, license: 'Yi License', mmlu: 78.9, math: 75.0, swe_bench: 33.7, risk: 'Medium', input_tokens: 27, output_tokens: 165, energy_wh: 0.9, min_vram_gb: 24, modification_difficulty: 'Medium' },

                // Closed Source Models
                { family: 'OpenAI', name: 'GPT-5 (Proj.)', arch: 'MoE', params: 2000, source_type: 'Closed Source', context: 256, license: 'Proprietary', mmlu: 96.5, math: 99.0, swe_bench: 78.0, risk: 'Low', input_tokens: 24, output_tokens: 140, energy_wh: 10.0, min_vram_gb: null, modification_difficulty: null },
                { family: 'OpenAI', name: 'GPT-4.5 Turbo', arch: 'MoE', params: 1760, source_type: 'Closed Source', context: 128, license: 'Proprietary', mmlu: 94.2, math: 96.5, swe_bench: 72.3, risk: 'Low', input_tokens: 25, output_tokens: 145, energy_wh: 8.5, min_vram_gb: null, modification_difficulty: null },
                { family: 'Google', name: 'Gemini 2.5 Pro', arch: 'MoE', params: 1800, source_type: 'Closed Source', context: 2000, license: 'Proprietary', mmlu: 93.5, math: 95.0, swe_bench: 68.9, risk: 'Low', input_tokens: 26, output_tokens: 150, energy_wh: 9.0, min_vram_gb: null, modification_difficulty: null },
                { family: 'Anthropic', name: 'Claude 4 Opus', arch: 'Dense', params: 1500, source_type: 'Closed Source', context: 200, license: 'Proprietary', mmlu: 95.1, math: 94.0, swe_bench: 75.1, risk: 'Very Low', input_tokens: 22, output_tokens: 130, energy_wh: 12.0, min_vram_gb: null, modification_difficulty: null },
                { family: 'Anthropic', name: 'Claude 3.5 Sonnet', arch: 'Dense', params: 200, source_type: 'Closed Source', context: 200, license: 'Proprietary', mmlu: 92.0, math: 90.0, swe_bench: 70.5, risk: 'Very Low', input_tokens: 23, output_tokens: 135, energy_wh: 3.0, min_vram_gb: null, modification_difficulty: null },
                { family: 'Zhipu AI', name: 'GLM-4.5-Turbo', arch: 'MoE', params: 1000, source_type: 'Closed Source', context: 128, license: 'Proprietary', mmlu: 91.5, math: 92.0, swe_bench: 65.2, risk: 'Medium', input_tokens: 28, output_tokens: 160, energy_wh: 7.0, min_vram_gb: null, modification_difficulty: null },
                { family: 'Zhipu AI', name: 'GLM-4.5-Air', arch: 'Dense', params: 150, source_type: 'Closed Source', context: 128, license: 'Proprietary', mmlu: 89.0, math: 88.5, swe_bench: 60.1, risk: 'Medium', input_tokens: 27, output_tokens: 155, energy_wh: 2.5, min_vram_gb: null, modification_difficulty: null },
            ],
            recommendations: {
                max_perf: { title: "Absolute Maximum Performance", model: "OpenAI GPT-5 / Claude 4 Opus", summary: "For tasks where state-of-the-art performance is the only metric that matters, the leading proprietary models are the top choice. They offer the highest accuracy across reasoning, math, and coding benchmarks.", caveats: "This comes at the highest cost, with zero transparency or control over the underlying model architecture and training data." },
                open_perf: { title: "Best Open Source Performance", model: "DeepSeek-R1", summary: "For teams that require transparency, control, and the ability to self-host without sacrificing performance, DeepSeek-R1 is the top open-source contender, especially for reasoning and math.", caveats: "Requires significant in-house MLOps expertise and a robust pipeline to mitigate hallucination risks." },
                agentic_coding: { title: "State-of-the-Art Agentic Coding", model: "GPT-5 (Closed) / Qwen3-Coder (Open)", summary: "For agentic software development, GPT-5 is the projected leader. Qwen3-Coder is the best open-source alternative, demonstrating exceptional performance on real-world coding tasks.", caveats: "Evaluate based on whether the raw capability of a closed model or the transparency and control of an open one is more critical for your project." },
                balanced: { title: "Balanced Cost & Performance", model: "Claude 3.5 Sonnet / Mixtral 8x22B", summary: "Claude 3.5 Sonnet offers near-Opus level performance at a fraction of the cost. Mixtral 8x22B is its open-source equivalent, providing excellent performance on prosumer hardware.", caveats: "The choice depends on the project's budget and stance on open vs. closed ecosystems." },
                memory_efficiency: { title: "Maximum Memory & Context Efficiency", model: "Kiwi K2", summary: "For applications requiring a large context window while maintaining a manageable memory footprint, Kiwi K2 offers a compelling balance. It provides strong performance in a memory-efficient package.", caveats: "As a newer model, the ecosystem of tools and community support may be less mature than more established alternatives." },
                edge: { title: "On-Device & Edge Computing", model: "Microsoft Phi-3-medium / Llama 3.1 8B", summary: "For applications running on resource-constrained devices, these models offer an exceptional balance of performance and small footprint.", caveats: "These models have smaller knowledge bases and may require fine-tuning for specialized tasks." },
                creative: { title: "Creative Image Generation", model: "Stable Diffusion 3", summary: "For generating high-quality, photorealistic, and stylistically diverse images, SD3 represents the state of the art in open models.", caveats: "Requires significant VRAM (16GB+) for optimal performance and can be slower than proprietary APIs." }
            }
        };

        const views = {
            explorer: `
                <div class="fade-in">
                    <div class="text-center mb-8">
                        <h2 class="text-3xl font-bold text-stone-800">Model Explorer</h2>
                        <p class="mt-2 max-w-3xl mx-auto text-stone-600">The AI landscape is a mix of open and closed ecosystems. Use the filters to navigate and compare models based on their source, architecture, and family. Click column headers to sort.</p>
                    </div>
                    <div class="card p-4 mb-8">
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div>
                                <label class="font-semibold text-stone-600">Source Type:</label>
                                <div id="source_type-filters" class="flex flex-wrap gap-2 mt-2"></div>
                            </div>
                            <div>
                                <label class="font-semibold text-stone-600">Family:</label>
                                <div id="family-filters" class="flex flex-wrap gap-2 mt-2"></div>
                            </div>
                            <div>
                                <label class="font-semibold text-stone-600">Architecture:</label>
                                <div id="arch-filters" class="flex flex-wrap gap-2 mt-2"></div>
                            </div>
                        </div>
                    </div>
                    <div class="card p-2 sm:p-4">
                        <div class="overflow-x-auto">
                            <table class="w-full text-left" id="models-table-container">
                                <thead class="border-b-2 border-stone-300">
                                    <tr>
                                        <th class="p-3 cursor-pointer" data-sort="name">Model üîº</th>
                                        <th class="p-3 cursor-pointer" data-sort="source_type">Source</th>
                                        <th class="p-3 cursor-pointer" data-sort="family">Family</th>
                                        <th class="p-3 cursor-pointer" data-sort="params">Params (B)</th>
                                        <th class="p-3 cursor-pointer" data-sort="min_vram_gb">Min. VRAM (GB)</th>
                                        <th class="p-3">License</th>
                                    </tr>
                                </thead>
                                <tbody id="models-table-body"></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            `,
            performance: `
                <div class="fade-in">
                    <div class="text-center mb-8">
                        <h2 class="text-3xl font-bold text-stone-800">Benchmark Deep Dive</h2>
                        <p class="mt-2 max-w-3xl mx-auto text-stone-600">How do open models stack up against the proprietary giants? Select a benchmark to compare capabilities across different domains of expertise.</p>
                    </div>
                    <div class="flex justify-center gap-2 mb-8 flex-wrap">
                        <button id="btn-mmlu" class="px-4 py-2 bg-teal-600 text-white rounded-lg shadow hover:bg-teal-700 transition">General Reasoning (MMLU)</button>
                        <button id="btn-math" class="px-4 py-2 bg-stone-500 text-white rounded-lg shadow hover:bg-stone-600 transition">Advanced Math (MATH)</button>
                        <button id="btn-swe_bench" class="px-4 py-2 bg-stone-500 text-white rounded-lg shadow hover:bg-stone-600 transition">Agentic Coding (SWE-Bench)</button>
                    </div>
                    <div class="card p-4 md:p-6">
                        <div class="chart-container">
                            <canvas id="performanceChart"></canvas>
                        </div>
                    </div>
                </div>
            `,
            efficiency: `
                <div class="fade-in">
                    <div class="text-center mb-12">
                        <h2 class="text-3xl font-bold text-stone-800">Efficiency & Cost Analysis</h2>
                        <p class="mt-2 max-w-3xl mx-auto text-stone-600">This section analyzes performance-per-watt and the token usage of different models for a standardized task. Note: Energy for closed models is estimated.</p>
                    </div>
                    <div class="grid lg:grid-cols-5 gap-8">
                        <div class="lg:col-span-3 card p-4 md:p-6">
                            <h3 class="text-xl font-bold text-center mb-4">Performance vs. Power Consumption</h3>
                            <p class="text-center text-sm text-stone-500 mb-4">MMLU Score vs. Est. Watt-Hours per 1k Output Tokens</p>
                            <div class="chart-container">
                                <canvas id="efficiencyChart"></canvas>
                            </div>
                        </div>
                        <div class="lg:col-span-2 card p-4 md:p-6">
                            <h3 class="text-xl font-bold text-center mb-4">Token Usage Comparison</h3>
                            <p class="text-center text-sm text-stone-500 mb-4">For a standardized prompt: "Explain the theory of relativity in three paragraphs."</p>
                            <div class="overflow-x-auto mt-6">
                                <table class="w-full text-left">
                                    <thead class="border-b-2 border-stone-300">
                                        <tr>
                                            <th class="p-2">Model</th>
                                            <th class="p-2 text-center">Input</th>
                                            <th class="p-2 text-center">Output</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        ${modelData.models.filter(m => m.output_tokens).sort((a,b) => (a.input_tokens + a.output_tokens) - (b.input_tokens + b.output_tokens)).map(m => `
                                            <tr class="border-b border-stone-200">
                                                <td class="p-2 font-semibold">${m.name}</td>
                                                <td class="p-2 text-center">${m.input_tokens}</td>
                                                <td class="p-2 text-center">${m.output_tokens}</td>
                                            </tr>
                                        `).join('')}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            `,
            modification: `
                <div class="fade-in">
                    <div class="text-center mb-12">
                        <h2 class="text-3xl font-bold text-stone-800">Modification & Fine-Tuning Difficulty</h2>
                        <p class="mt-2 max-w-3xl mx-auto text-stone-600">A key advantage of open-source models is the ability to customize them. This rating assesses the difficulty of fine-tuning each model, based on community support, available tools (e.g., LoRA scripts), and architectural complexity.</p>
                    </div>
                    <div class="card p-6">
                         <div class="overflow-x-auto">
                            <table class="w-full text-left">
                                <thead class="border-b-2 border-stone-300">
                                    <tr><th class="p-3">Model</th><th class="p-3 text-center">Difficulty Rating</th></tr>
                                </thead>
                                <tbody>
                                    ${modelData.models.filter(m => m.source_type === 'Open Source').sort((a,b) => a.name.localeCompare(b.name)).map(m => `
                                        <tr class="border-b border-stone-200 hover:bg-stone-50">
                                            <td class="p-3 font-semibold">${m.name}</td>
                                            <td class="p-3 text-center">
                                                <span class="px-3 py-1 text-sm rounded-full font-medium ${
                                                    m.modification_difficulty === 'Hard' ? 'bg-red-100 text-red-800' :
                                                    m.modification_difficulty === 'Medium' ? 'bg-amber-100 text-amber-800' :
                                                    m.modification_difficulty === 'Very Hard' ? 'bg-purple-100 text-purple-800' :
                                                    'bg-green-100 text-green-800'
                                                }">${m.modification_difficulty}</span>
                                            </td>
                                        </tr>
                                    `).join('')}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            `,
            risks: `
                <div class="fade-in">
                    <div class="text-center mb-12">
                        <h2 class="text-3xl font-bold text-stone-800">Risk & Reliability Matrix</h2>
                        <p class="mt-2 max-w-3xl mx-auto text-stone-600">A qualitative assessment of key risks. Closed-source models generally have lower risk due to extensive, proprietary safety systems, though this often comes at the cost of flexibility and potential over-censorship.</p>
                    </div>
                    <div class="card p-6">
                         <div class="overflow-x-auto">
                            <table class="w-full text-left">
                                <thead class="border-b-2 border-stone-300">
                                    <tr><th class="p-3">Model</th><th class="p-3 text-center">Overall Risk Level</th></tr>
                                </thead>
                                <tbody>
                                    ${modelData.models.sort((a,b) => a.name.localeCompare(b.name)).map(m => `
                                        <tr class="border-b border-stone-200 hover:bg-stone-50">
                                            <td class="p-3 font-semibold">${m.name}</td>
                                            <td class="p-3 text-center">
                                                <span class="px-3 py-1 text-sm rounded-full font-medium ${
                                                    m.risk === 'High' ? 'bg-red-100 text-red-800' :
                                                    m.risk === 'Medium' ? 'bg-amber-100 text-amber-800' :
                                                    m.risk === 'Very Low' ? 'bg-sky-100 text-sky-800' :
                                                    'bg-green-100 text-green-800'
                                                }">${m.risk}</span>
                                            </td>
                                        </tr>
                                    `).join('')}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            `,
            advisor: `
                <div class="fade-in">
                    <div class="text-center mb-12">
                        <h2 class="text-3xl font-bold text-stone-800">Strategic Advisor</h2>
                        <p class="mt-2 max-w-3xl mx-auto text-stone-600">The optimal choice of model depends on your priorities. Select your primary use case to receive a tailored recommendation that considers both open and closed ecosystems.</p>
                    </div>
                    <div class="max-w-2xl mx-auto card p-6">
                        <label for="use-case-selector" class="block text-lg font-medium text-stone-700 mb-2">Select your primary use case:</label>
                        <select id="use-case-selector" class="w-full p-3 border border-stone-300 rounded-lg bg-white shadow-sm focus:ring-2 focus:ring-teal-500 focus:border-teal-500">
                            <option value="max_perf">Absolute Maximum Performance</option>
                            <option value="open_perf">Best Open Source Performance</option>
                            <option value="agentic_coding">State-of-the-Art Agentic Coding</option>
                            <option value="balanced">Balanced Cost & Performance</option>
                            <option value="memory_efficiency">Maximum Memory & Context Efficiency</option>
                            <option value="edge">On-Device & Edge Computing</option>
                            <option value="creative">Creative Image Generation</option>
                        </select>
                        <div id="recommendation-output" class="mt-6 p-6 bg-stone-50 rounded-lg border border-teal-200"></div>
                    </div>
                </div>
            `
        };

        let currentFilters = { source_type: [], family: [], arch: [] };
        let sortConfig = { key: 'name', asc: true };
        let performanceChart, efficiencyChart;

        function showView(viewName) {
            document.getElementById('main-content').innerHTML = views[viewName] || views.explorer;
            document.querySelectorAll('.tab-button').forEach(b => b.classList.replace('tab-active', 'tab-inactive'));
            const activeButton = Array.from(document.querySelectorAll('.tab-button')).find(btn => btn.getAttribute('onclick') === `showView('${viewName}')`);
            if (activeButton) activeButton.classList.replace('tab-inactive', 'tab-active');
            
            if (viewName === 'explorer') setupExplorer();
            if (viewName === 'performance') setupPerformanceChart();
            if (viewName === 'efficiency') setupEfficiencyChart();
            if (viewName === 'advisor') setupAdvisor();
        }

        function setupExplorer() {
            const source_types = [...new Set(modelData.models.map(m => m.source_type))];
            const families = [...new Set(modelData.models.map(m => m.family))];
            const archs = [...new Set(modelData.models.map(m => m.arch))];

            const createFilterButtons = (containerId, items, filterKey) => {
                const container = document.getElementById(containerId);
                if (!container) return;
                container.innerHTML = items.map(item => `<button class="filter-btn-inactive px-3 py-1 rounded-full text-sm" onclick="toggleFilter('${filterKey}', '${item}', this)">${item}</button>`).join('');
            };

            createFilterButtons('source_type-filters', source_types, 'source_type');
            createFilterButtons('family-filters', families, 'family');
            createFilterButtons('arch-filters', archs, 'arch');
            
            document.querySelectorAll('#models-table-container th').forEach(th => {
                th.addEventListener('click', () => {
                    const key = th.dataset.sort;
                    if (sortConfig.key === key) sortConfig.asc = !sortConfig.asc;
                    else { sortConfig.key = key; sortConfig.asc = true; }
                    renderTable();
                });
            });
            renderTable();
        }
        
        window.toggleFilter = (key, value, btn) => {
            const index = currentFilters[key].indexOf(value);
            if (index > -1) {
                currentFilters[key].splice(index, 1);
                btn.classList.replace('filter-btn-active', 'filter-btn-inactive');
            } else {
                currentFilters[key].push(value);
                btn.classList.replace('filter-btn-inactive', 'filter-btn-active');
            }
            renderTable();
        };

        function renderTable() {
            let filteredModels = modelData.models.filter(m => {
                return Object.keys(currentFilters).every(key => 
                    currentFilters[key].length === 0 || currentFilters[key].includes(m[key])
                );
            });

            filteredModels.sort((a, b) => {
                const valA = a[sortConfig.key];
                const valB = b[sortConfig.key];
                if (valA === null) return 1;
                if (valB === null) return -1;
                if (valA < valB) return sortConfig.asc ? -1 : 1;
                if (valA > valB) return sortConfig.asc ? 1 : -1;
                return 0;
            });

            const tableBody = document.getElementById('models-table-body');
            if(!tableBody) return;
            tableBody.innerHTML = filteredModels.map(m => `
                <tr class="border-b border-stone-200 hover:bg-stone-50">
                    <td class="p-3 font-semibold">${m.name}</td>
                    <td class="p-3"><span class="px-2 py-1 text-xs font-medium rounded-full ${m.source_type === 'Open Source' ? 'bg-teal-100 text-teal-800' : 'bg-sky-100 text-sky-800'}">${m.source_type}</span></td>
                    <td class="p-3">${m.family}</td>
                    <td class="p-3">${m.params}</td>
                    <td class="p-3">${m.min_vram_gb !== null ? m.min_vram_gb : 'N/A'}</td>
                    <td class="p-3">${m.license}</td>
                </tr>
            `).join('');
            
            document.querySelectorAll('#models-table-container th').forEach(th => {
                let text = th.innerText.replace(' üîº', '').replace(' üîΩ', '');
                if (th.dataset.sort === sortConfig.key) text += sortConfig.asc ? ' üîº' : ' üîΩ';
                th.innerText = text;
            });
        }

        function setupPerformanceChart() {
            const ctx = document.getElementById('performanceChart')?.getContext('2d');
            if (!ctx) return;
            const chartConfig = {
                type: 'bar',
                data: { labels: [], datasets: [{ label: '', data: [], backgroundColor: [], borderColor: [], borderWidth: 1 }] },
                options: { indexAxis: 'y', responsive: true, maintainAspectRatio: false, scales: { x: { beginAtZero: true, grid: { color: '#E7E5E4' } }, y: { grid: { display: false } } }, plugins: { legend: { display: false }, tooltip: { callbacks: { label: ctx => `${ctx.dataset.label}: ${ctx.raw.toFixed(1)}%` } } } }
            };
            if(performanceChart) performanceChart.destroy();
            performanceChart = new Chart(ctx, chartConfig);

            const updateChart = (benchmark, label) => {
                const filteredData = modelData.models.filter(m => m[benchmark] !== null).sort((a, b) => b[benchmark] - a[benchmark]);
                performanceChart.data.labels = filteredData.map(m => m.name);
                const dataset = performanceChart.data.datasets[0];
                dataset.data = filteredData.map(m => m[benchmark]);
                dataset.label = label;
                dataset.backgroundColor = filteredData.map(m => m.source_type === 'Open Source' ? 'rgba(20, 184, 166, 0.6)' : 'rgba(56, 189, 248, 0.6)');
                dataset.borderColor = filteredData.map(m => m.source_type === 'Open Source' ? 'rgba(15, 118, 110, 1)' : 'rgba(14, 165, 233, 1)');
                performanceChart.update();
                ['mmlu', 'math', 'swe_bench'].forEach(id => document.getElementById(`btn-${id}`).className = 'px-4 py-2 bg-stone-500 text-white rounded-lg shadow hover:bg-stone-600 transition');
                document.getElementById(`btn-${benchmark}`).className = 'px-4 py-2 bg-teal-600 text-white rounded-lg shadow hover:bg-teal-700 transition';
            };

            document.getElementById('btn-mmlu').onclick = () => updateChart('mmlu', 'General Reasoning (MMLU)');
            document.getElementById('btn-math').onclick = () => updateChart('math', 'Advanced Math (MATH)');
            document.getElementById('btn-swe_bench').onclick = () => updateChart('swe_bench', 'Agentic Coding (SWE-Bench)');
            updateChart('mmlu', 'General Reasoning (MMLU)');
        }

        function setupEfficiencyChart() {
            const ctx = document.getElementById('efficiencyChart')?.getContext('2d');
            if(!ctx) return;
            const efficiencyData = modelData.models
                .filter(m => m.mmlu && m.energy_wh)
                .map(m => ({
                    x: m.mmlu,
                    y: m.energy_wh,
                    r: Math.sqrt(m.params) / 2,
                    label: m.name,
                    source_type: m.source_type
                }));
            
            const sourceColors = {
                'Open Source': 'rgba(20, 184, 166, 0.7)',
                'Closed Source': 'rgba(56, 189, 248, 0.7)'
            };

            const chartConfig = {
                type: 'bubble',
                data: {
                    datasets: [{
                        label: 'Models',
                        data: efficiencyData,
                        backgroundColor: efficiencyData.map(d => sourceColors[d.source_type]),
                        borderColor: efficiencyData.map(d => sourceColors[d.source_type].replace('0.7', '1')),
                        borderWidth: 1,
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: { title: { display: true, text: 'Reasoning Performance (MMLU Score %)' } },
                        y: { title: { display: true, text: 'Energy Consumption (Watt-Hours, log scale)' }, type: 'logarithmic' }
                    },
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const d = context.raw;
                                    return `${d.label}: ${d.x.toFixed(1)}% MMLU, ${d.y.toFixed(2)} Wh`;
                                }
                            }
                        }
                    }
                }
            };
            if(efficiencyChart) efficiencyChart.destroy();
            efficiencyChart = new Chart(ctx, chartConfig);
        }
        
        function setupAdvisor() {
            const selector = document.getElementById('use-case-selector');
            const output = document.getElementById('recommendation-output');
            const updateRecommendation = () => {
                const recommendation = modelData.recommendations[selector.value];
                output.innerHTML = `<h4 class="text-xl font-bold text-teal-800 mb-2">${recommendation.title}</h4><p class="font-semibold text-lg text-stone-700 mb-3">Top Choice(s): <span class="text-teal-600">${recommendation.model}</span></p><p class="text-stone-600 mb-4">${recommendation.summary}</p><div class="p-3 bg-amber-50 border-l-4 border-amber-400 text-amber-800"><p class="font-semibold">Caveats:</p><p class="text-sm">${recommendation.caveats}</p></div>`;
            };
            selector.addEventListener('change', updateRecommendation);
            updateRecommendation();
        }

        window.onload = () => showView('explorer');
    </script>

</body>
</html>
